"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{9205:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:u=2,absoluteStrokeWidth:s,className:c="",children:d,iconNode:l,...f}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:s?24*Number(u)/Number(n):u,className:i("lucide",c),...f},[...l.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),s=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:s,...c}=r;return(0,a.createElement)(u,{ref:o,iconNode:t,className:i("lucide-".concat(n(e)),s),...c})});return r.displayName="".concat(e),r}},9322:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7769:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},2208:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6337:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7648:function(e,t,r){r.d(t,{default:function(){return n.a}});var a=r(2972),n=r.n(a)},9376:function(e,t,r){var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},4362:function(e,t,r){r.d(t,{AuthProvider:function(){return d},a:function(){return c}});var a=r(7437),n=r(2265),i=r(3301),o=r(6410),u=r(925);let s=(0,n.createContext)(void 0),c=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:t}=e,[r,c]=(0,n.useState)(null),[d,f]=(0,n.useState)(null),[y,h]=(0,n.useState)(!0),w=async(e,t)=>{try{let r=await (0,i.e5)(o.I8,e,t);r.user&&await (0,u.V4)(r.user.uid)}catch(e){throw console.error("Login error:",e),Error(l(e.code))}},m=async(e,t,r)=>{try{let a=await (0,i.Xb)(o.I8,e,t);a.user&&(await (0,i.ck)(a.user,{displayName:r.displayName}),await (0,u.r4)({uid:a.user.uid,email:a.user.email,displayName:r.displayName,role:r.role||"student",university:r.university,graduationYear:r.graduationYear}),await (0,i.w$)(a.user))}catch(e){throw console.error("Registration error:",e),Error(l(e.code))}},v=async()=>{try{await (0,i.w7)(o.I8),c(null),f(null)}catch(e){throw console.error("Logout error:",e),Error("فشل في تسجيل الخروج")}},p=async e=>{try{await (0,i.LS)(o.I8,e)}catch(e){throw console.error("Password reset error:",e),Error(l(e.code))}},k=async e=>{if(!d)throw Error("لا يوجد مستخدم مسجل دخول");try{await (0,i.ck)(d,{displayName:e}),r&&await (0,u.r4)({...r,displayName:e})}catch(e){throw console.error("Profile update error:",e),Error("فشل في تحديث الملف الشخصي")}},g=async()=>{if(!d)throw Error("لا يوجد مستخدم مسجل دخول");try{await (0,i.w$)(d)}catch(e){throw console.error("Email verification error:",e),Error("فشل في إرسال رسالة التحقق")}};return(0,n.useEffect)(()=>(0,i.Aj)(o.I8,async e=>{if(f(e),e)try{let t=await (0,u.PR)(e.uid);c(t)}catch(e){console.error("Error fetching user data:",e),c(null)}else c(null);h(!1)}),[]),(0,a.jsx)(s.Provider,{value:{currentUser:r,firebaseUser:d,loading:y,login:w,register:m,logout:v,resetPassword:p,updateUserProfile:k,sendVerificationEmail:g},children:t})},l=e=>{switch(e){case"auth/user-not-found":return"لا يوجد حساب مرتبط بهذا البريد الإلكتروني";case"auth/wrong-password":return"كلمة المرور غير صحيحة";case"auth/email-already-in-use":return"هذا البريد الإلكتروني مستخدم بالفعل";case"auth/weak-password":return"كلمة المرور ضعيفة. يجب أن تكون 6 أحرف على الأقل";case"auth/invalid-email":return"البريد الإلكتروني غير صحيح";case"auth/user-disabled":return"تم تعطيل هذا الحساب";case"auth/too-many-requests":return"تم تجاوز عدد المحاولات المسموح. حاول مرة أخرى لاحقاً";case"auth/network-request-failed":return"خطأ في الاتصال بالإنترنت";default:return"حدث خطأ غير متوقع. حاول مرة أخرى"}}},6410:function(e,t,r){r.d(t,{I8:function(){return d},db:function(){return l},tO:function(){return f}});var a=r(738),n=r(3301),i=r(5978),o=r(62),u=r(6834);let s={apiKey:"AIzaSyBVPwdXDXdGJzH4bdEJTmGO6CLdwJcFvp0",authDomain:"sple-exam-system.firebaseapp.com",projectId:"sple-exam-system",storageBucket:"sple-exam-system.firebasestorage.app",messagingSenderId:"684476565122",appId:"1:684476565122:web:65f005113e5e29e421569b",measurementId:"G-JM2SWJY950"};if(!s.apiKey||!s.authDomain||!s.projectId)throw Error("Firebase configuration is incomplete. Please check your environment variables.");let c=(0,a.ZF)(s),d=(0,n.v0)(c),l=(0,i.ad)(c),f=(0,o.cF)(c);(0,u.IH)(c)},925:function(e,t,r){r.d(t,{$V:function(){return v},Ds:function(){return h},Km:function(){return w},L$:function(){return k},PR:function(){return d},V4:function(){return l},f_:function(){return p},iv:function(){return y},nW:function(){return m},r4:function(){return c},tI:function(){return f}});var a=r(5978),n=r(6410);let i=(0,a.hJ)(n.db,"users"),o=(0,a.hJ)(n.db,"questions"),u=(0,a.hJ)(n.db,"examSessions"),s=(0,a.hJ)(n.db,"userProgress"),c=async e=>{let t=(0,a.JU)(i,e.uid);await (0,a.r7)(t,{...e,createdAt:(0,a.Bt)(),lastLogin:(0,a.Bt)()})},d=async e=>{let t=(0,a.JU)(i,e),r=await (0,a.QT)(t);if(r.exists()){var n,o;let e=r.data();return{uid:r.id,...e,createdAt:(null===(n=e.createdAt)||void 0===n?void 0:n.toDate())||new Date,lastLogin:(null===(o=e.lastLogin)||void 0===o?void 0:o.toDate())||new Date}}return null},l=async e=>{let t=(0,a.JU)(i,e);await (0,a.r7)(t,{lastLogin:(0,a.Bt)()})},f=async function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,i=[(0,a.ar)("approved","==",r),(0,a.Xo)("createdAt","desc"),(0,a.b9)(n)];e&&i.splice(1,0,(0,a.ar)("domain","==",e)),t&&i.splice(e?2:1,0,(0,a.ar)("difficulty","==",t));let u=(0,a.IO)(o,...i);return(await (0,a.PL)(u)).docs.map(e=>{var t;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}})},y=async(e,t,r)=>{let a=(await f(t,r,!0,3*e)).sort(()=>.5-Math.random());return a.slice(0,Math.min(e,a.length))},h=async(e,t)=>{let r=(0,a.JU)(o,e);await (0,a.r7)(r,t)},w=async e=>{let t=(0,a.JU)(o,e);await (0,a.oe)(t)},m=async e=>(await (0,a.ET)(u,{...e,startTime:e.startTime||(0,a.Bt)(),endTime:e.endTime||null})).id,v=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=[(0,a.ar)("userId","==",e),(0,a.Xo)("startTime","desc"),(0,a.b9)(r)];t&&n.splice(1,0,(0,a.ar)("examType","==",t));let i=(0,a.IO)(u,...n);return(await (0,a.PL)(i)).docs.map(e=>{var t,r;return{id:e.id,...e.data(),startTime:(null===(t=e.data().startTime)||void 0===t?void 0:t.toDate())||new Date,endTime:(null===(r=e.data().endTime)||void 0===r?void 0:r.toDate())||void 0}})},p=async(e,t)=>{let r=(0,a.JU)(u,e),n={...t};t.endTime&&(n.endTime=a.EK.fromDate(t.endTime)),await (0,a.r7)(r,n)},k=async e=>{let t=(0,a.JU)(s,e),r=await (0,a.QT)(t);if(r.exists()){var n;let t=r.data();return{userId:e,...t,lastUpdated:(null===(n=t.lastUpdated)||void 0===n?void 0:n.toDate())||new Date}}return null}}}]);