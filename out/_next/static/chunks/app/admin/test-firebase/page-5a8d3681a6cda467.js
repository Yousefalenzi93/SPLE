(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{6211:function(e,t,s){Promise.resolve().then(s.bind(s,3703))},1976:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2940:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1935:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7589:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},8094:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},6706:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4258:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(231),r=s.n(a)},3703:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),r=s(2265),n=s(9630),i=s(7034),c=s(9506),l=s(9842),o=s(5735),d=s(9854),u=s(357);class h{async runAllTests(){return console.log("\uD83D\uDD25 بدء اختبار الاتصال بـ Firebase..."),this.results=[],await this.testFirestoreConnection(),await this.testAuthenticationConnection(),await this.testStorageConnection(),await this.testSecurityRules(),await this.cleanup(),this.results}async testFirestoreConnection(){let e=Date.now();try{let t=(0,l.JU)((0,l.hJ)(c.db,"test"),"connection-test");if(await (0,l.pl)(t,{message:"Firebase connection test",timestamp:new Date,testId:Date.now()}),(await (0,l.QT)(t)).exists())await (0,l.oe)(t),this.results.push({test:"Firestore Connection",status:"success",message:"تم الاتصال بـ Firestore بنجاح",duration:Date.now()-e});else throw Error("Document not found after creation")}catch(t){this.results.push({test:"Firestore Connection",status:"error",message:"فشل الاتصال بـ Firestore: ".concat(t instanceof Error?t.message:"Unknown error"),duration:Date.now()-e})}}async testAuthenticationConnection(){let e=Date.now();try{let t=(await (0,o.Xb)(c.I8,this.testEmail,this.testPassword)).user;t&&(await c.I8.signOut(),await (0,o.e5)(c.I8,this.testEmail,this.testPassword),this.results.push({test:"Firebase Authentication",status:"success",message:"تم اختبار المصادقة بنجاح",duration:Date.now()-e}),this.testUserId=t.uid)}catch(t){this.results.push({test:"Firebase Authentication",status:"error",message:"فشل اختبار المصادقة: ".concat(t instanceof Error?t.message:"Unknown error"),duration:Date.now()-e})}}async testStorageConnection(){let e=Date.now();try{let t=new Blob(["Test file content"],{type:"text/plain"}),s=(0,d.iH)(c.tO,"test/connection-test-".concat(Date.now(),".txt"));await (0,d.KV)(s,t),await (0,d.Jt)(s)&&(await (0,d.oq)(s),this.results.push({test:"Firebase Storage",status:"success",message:"تم اختبار التخزين بنجاح",duration:Date.now()-e}))}catch(t){this.results.push({test:"Firebase Storage",status:"error",message:"فشل اختبار التخزين: ".concat(t instanceof Error?t.message:"Unknown error"),duration:Date.now()-e})}}async testSecurityRules(){let e=Date.now();try{if(!c.I8.currentUser)throw Error("No authenticated user for security rules test");let t=(0,l.JU)(c.db,"users",c.I8.currentUser.uid);await (0,l.pl)(t,{email:c.I8.currentUser.email,role:"student",createdAt:new Date}),(await (0,l.QT)(t)).exists()&&this.results.push({test:"Security Rules",status:"success",message:"قواعد الأمان تعمل بشكل صحيح",duration:Date.now()-e})}catch(t){this.results.push({test:"Security Rules",status:"error",message:"مشكلة في قواعد الأمان: ".concat(t instanceof Error?t.message:"Unknown error"),duration:Date.now()-e})}}async cleanup(){try{if(c.I8.currentUser&&this.testUserId){let e=(0,l.JU)(c.db,"users",this.testUserId);await (0,l.oe)(e).catch(()=>{}),await (0,o.h8)(c.I8.currentUser).catch(()=>{})}await c.I8.signOut().catch(()=>{}),console.log("✅ تم تنظيف بيانات الاختبار")}catch(e){console.warn("⚠️ تحذير: لم يتم تنظيف جميع بيانات الاختبار:",e)}}static formatResults(e){let t="\n\uD83D\uDD25 نتائج اختبار Firebase:\n";t+="================================\n\n",e.forEach((e,s)=>{let a="success"===e.status?"✅":"❌",r=e.duration?" (".concat(e.duration,"ms)"):"";t+="".concat(s+1,". ").concat(a," ").concat(e.test).concat(r,"\n")+"   ".concat(e.message,"\n\n")});let s=e.filter(e=>"success"===e.status).length,a=e.length;return t+="\uD83D\uDCCA النتيجة النهائية: ".concat(s,"/").concat(a," اختبارات نجحت\n"),s===a?t+="\uD83C\uDF89 جميع الاختبارات نجحت! Firebase جاهز للاستخدام.\n":t+="⚠️ بعض الاختبارات فشلت. يرجى مراجعة الإعدادات.\n",t}constructor(){this.results=[],this.testEmail="test-".concat(Date.now(),"@example.com"),this.testPassword="TestPassword123!"}}let m={async firestore(){try{let e=(0,l.JU)((0,l.hJ)(c.db,"test"),"quick-test");await (0,l.pl)(e,{test:!0});let t=await (0,l.QT)(e);return await (0,l.oe)(e),t.exists()}catch(e){return!1}},async auth(){try{return null!==c.I8.app}catch(e){return!1}},async storage(){try{return null!==c.tO.app}catch(e){return!1}}};var x=s(2940),g=s(1935),w=s(1976),p=s(4258),y=s(8094),b=s(6706),f=s(7589),j=s(933),N=s(6127),v=s(7138);function k(){let{currentUser:e}=(0,n.a)(),[t,s]=(0,r.useState)(!1),[c,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(null),k=async()=>{s(!0),l([]);try{let e=new h,t=await e.runAllTests();l(t)}catch(e){l([{test:"General Error",status:"error",message:"خطأ عام في الاختبار: ".concat(e instanceof Error?e.message:"Unknown error")}])}finally{s(!1)}},E=async()=>{s(!0);let e=[];try{let t=await m.firestore();e.push({test:"Firestore Quick Test",status:t?"success":"error",message:t?"Firestore متاح":"Firestore غير متاح"});let s=await m.auth();e.push({test:"Auth Quick Test",status:s?"success":"error",message:s?"Authentication متاح":"Authentication غير متاح"});let a=await m.storage();e.push({test:"Storage Quick Test",status:a?"success":"error",message:a?"Storage متاح":"Storage غير متاح"}),l(e)}catch(e){l([{test:"Quick Test Error",status:"error",message:"خطأ في الاختبار السريع: ".concat(e instanceof Error?e.message:"Unknown error")}])}finally{s(!1)}},D=e=>"success"===e?(0,a.jsx)(x.Z,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(g.Z,{className:"h-5 w-5 text-red-600"}),F=e=>"success"===e?"bg-green-50 border-green-200":"bg-red-50 border-red-200";return(0,a.jsx)(i.Z,{requireAdmin:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(v.default,{href:"/admin",className:"flex items-center text-gray-600 hover:text-gray-900 ml-4",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 ml-1"}),"العودة إلى لوحة الإدارة"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"اختبار Firebase"})]})})})}),(0,a.jsx)("main",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 ml-2"}),"فحص إعدادات Firebase"]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("button",{onClick:()=>{d(function(){let e=["NEXT_PUBLIC_FIREBASE_API_KEY","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","NEXT_PUBLIC_FIREBASE_PROJECT_ID","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","NEXT_PUBLIC_FIREBASE_APP_ID"].filter(e=>!u.env[e]);return{valid:0===e.length,missing:e}}())},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mb-4",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 ml-2"}),"فحص الإعدادات"]}),o&&(0,a.jsxs)("div",{className:"border rounded-lg p-4 ".concat(o.valid?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[o.valid?(0,a.jsx)(x.Z,{className:"h-5 w-5 text-green-600 ml-2"}):(0,a.jsx)(g.Z,{className:"h-5 w-5 text-red-600 ml-2"}),(0,a.jsx)("span",{className:"font-medium ".concat(o.valid?"text-green-800":"text-red-800"),children:o.valid?"جميع الإعدادات موجودة":"إعدادات مفقودة"})]}),!o.valid&&(0,a.jsxs)("div",{className:"text-red-700 text-sm",children:[(0,a.jsx)("p",{className:"mb-2",children:"المتغيرات المفقودة:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:o.missing.map(e=>(0,a.jsx)("li",{children:e},e))})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 ml-2"}),"اختبارات Firebase"]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("button",{onClick:E,disabled:t,className:"flex items-center justify-center px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"جاري الاختبار..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 ml-2"}),"اختبار سريع"]})}),(0,a.jsx)("button",{onClick:k,disabled:t,className:"flex items-center justify-center px-6 py-3 bg-saudi-green text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"جاري الاختبار..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 ml-2"}),"اختبار شامل"]})})]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"الاختبار السريع:"})," فحص سريع لتوفر الخدمات"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"الاختبار الشامل:"})," اختبار كامل للقراءة والكتابة والمصادقة"]})]})]})]}),c.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 ml-2"}),"نتائج الاختبار"]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,a.jsx)("div",{className:"border rounded-lg p-4 ".concat(F(e.status)),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[D(e.status),(0,a.jsxs)("div",{className:"mr-3",children:[(0,a.jsx)("h4",{className:"font-medium ".concat("success"===e.status?"text-green-800":"text-red-800"),children:e.test}),(0,a.jsx)("p",{className:"text-sm mt-1 ".concat("success"===e.status?"text-green-700":"text-red-700"),children:e.message})]})]}),e.duration&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 ml-1"}),e.duration,"ms"]})]})},t))}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"ملخص النتائج"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[c.filter(e=>"success"===e.status).length," من ",c.length," اختبارات نجحت"]})]}),(0,a.jsx)("div",{className:"text-2xl",children:c.filter(e=>"success"===e.status).length===c.length?"\uD83C\uDF89":"⚠️"})]})})]})]}),(0,a.jsx)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 text-blue-600 ml-2 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"نصائح لحل المشاكل"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("li",{children:["• تأكد من وجود ملف ",(0,a.jsx)("code",{children:".env.local"})," مع جميع إعدادات Firebase"]}),(0,a.jsx)("li",{children:"• تحقق من قواعد الأمان في Firestore Console"}),(0,a.jsx)("li",{children:"• تأكد من تفعيل Authentication و Storage في Firebase Console"}),(0,a.jsx)("li",{children:"• راجع سجلات المتصفح (Console) للأخطاء التفصيلية"}),(0,a.jsx)("li",{children:"• تأكد من إضافة النطاق المحلي في Authorized domains"})]})]})]})})]})})]})})}}},function(e){e.O(0,[358,139,230,231,685,971,23,744],function(){return e(e.s=6211)}),_N_E=e.O()}]);