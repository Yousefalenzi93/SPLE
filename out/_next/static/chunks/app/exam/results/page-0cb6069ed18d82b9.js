(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[234],{1167:function(e,t,s){Promise.resolve().then(s.bind(s,4869))},8711:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},2940:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1935:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7164:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},5733:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5016:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var r=s(231),l=s.n(r)},4869:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(7437),l=s(2265),a=s(6463),n=s(9630),c=s(7022),i=s(7034),d=s(4451),o=s(7164),m=s(8030);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var u=s(5016),h=s(1935),y=s(2940),f=s(933),p=s(8711),g=s(5733);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,m.Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),b=(0,m.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var N=s(7138);function v(){let{currentUser:e}=(0,n.a)(),{currentSession:t,questions:s,answers:m,examConfig:v}=(0,c.U)(),w=(0,a.useRouter)(),[k,Z]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{t&&t.completed&&s.length||w.push("/dashboard")},[t,s,w]),!t||!t.completed||!s.length)return null;let S=s.length,E=s.filter((e,t)=>m[t]===e.correctAnswer).length,C=t.score||Math.round(E/S*100),M=t.timeSpent||0,T=C>=d.qP.PASSING_SCORE,O=Object.keys(d.wO).reduce((e,t)=>{let r=s.filter(e=>e.domain===t),l=r.filter((e,t)=>m[s.findIndex(t=>t.id===e.id)]===e.correctAnswer).length;return e[t]={total:r.length,correct:l,percentage:r.length>0?Math.round(l/r.length*100):0},e},{}),_=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";return(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"نتائج الامتحان"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,r.jsxs)("button",{className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 ml-1"}),"تحميل التقرير"]}),(0,r.jsxs)("button",{className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,r.jsx)(x,{className:"h-4 w-4 ml-1"}),"مشاركة"]})]})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsx)("div",{className:"rounded-lg border-2 p-8 mb-8 ".concat(C>=80?"bg-green-50 border-green-200":C>=60?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"),children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-4",children:T?(0,r.jsx)(u.Z,{className:"h-16 w-16 text-yellow-500"}):(0,r.jsx)(h.Z,{className:"h-16 w-16 text-red-500"})}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:T?"مبروك! لقد نجحت":"للأسف، لم تحقق الدرجة المطلوبة"}),(0,r.jsxs)("div",{className:"text-6xl font-bold mb-4 ".concat(_(C)),children:[C,"%"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,r.jsx)(y.Z,{className:"h-6 w-6 text-green-600 ml-2"}),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"إجابات صحيحة"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:E})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,r.jsx)(h.Z,{className:"h-6 w-6 text-red-600 ml-2"}),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"إجابات خاطئة"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:S-E})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,r.jsx)(f.Z,{className:"h-6 w-6 text-blue-600 ml-2"}),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"الوقت المستغرق"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?"".concat(t," ساعة ").concat(s," دقيقة"):"".concat(s," دقيقة ").concat(e%60," ثانية")})(M)})]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5 ml-2"}),"تحليل الأداء حسب المجال"]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(d.wO).map(e=>{let[t,s]=e,l=O[t];return l&&0!==l.total?(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:s.name}),(0,r.jsxs)("span",{className:"text-lg font-bold ".concat(_(l.percentage)),children:[l.percentage,"%"]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,r.jsxs)("span",{children:[l.correct," من ",l.total]}),(0,r.jsxs)("span",{children:[s.percentage,"% من الامتحان"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:"".concat(l.percentage,"%"),backgroundColor:s.color}})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:s.description})]},t):null})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"مراجعة تفصيلية للأسئلة"}),(0,r.jsxs)("button",{onClick:()=>Z(!k),className:"flex items-center px-3 py-2 text-sm text-blue-600 hover:text-blue-800",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 ml-1"}),k?"إخفاء التفاصيل":"عرض التفاصيل"]})]})}),k&&(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-6",children:s.map((e,t)=>{let s=m[t],l=s===e.correctAnswer;return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"bg-gray-100 text-gray-800 text-sm font-medium px-2 py-1 rounded mr-3",children:t+1}),(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full ml-2",style:{backgroundColor:d.wO[e.domain].color}}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:d.wO[e.domain].name})]}),(0,r.jsx)("div",{className:"flex items-center",children:l?(0,r.jsx)(y.Z,{className:"h-5 w-5 text-green-600"}):(0,r.jsx)(h.Z,{className:"h-5 w-5 text-red-600"})})]}),(0,r.jsx)("p",{className:"text-gray-900 mb-3 font-medium",children:e.content}),(0,r.jsx)("div",{className:"space-y-2 mb-3",children:e.options.map((t,a)=>(0,r.jsxs)("div",{className:"p-2 rounded text-sm ".concat(a===e.correctAnswer?"bg-green-50 text-green-800 border border-green-200":a!==s||l?"bg-gray-50 text-gray-700":"bg-red-50 text-red-800 border border-red-200"),children:[(0,r.jsxs)("span",{className:"font-medium ml-2",children:[String.fromCharCode(65+a),"."]}),t,a===e.correctAnswer&&(0,r.jsx)(y.Z,{className:"inline h-4 w-4 mr-1 text-green-600"}),a===s&&!l&&(0,r.jsx)(h.Z,{className:"inline h-4 w-4 mr-1 text-red-600"})]},a))}),e.explanation&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"الشرح:"})," ",e.explanation]})})]},e.id)})})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsxs)(N.default,{href:"/dashboard",className:"flex items-center justify-center px-6 py-3 bg-saudi-green text-white rounded-md hover:bg-green-700",children:[(0,r.jsx)(j,{className:"h-4 w-4 ml-2"}),"العودة إلى لوحة التحكم"]}),(0,r.jsxs)(N.default,{href:"/exam/mock",className:"flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:[(0,r.jsx)(b,{className:"h-4 w-4 ml-2"}),"إعادة الامتحان"]}),(0,r.jsxs)(N.default,{href:"/analytics",className:"flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 ml-2"}),"عرض التحليلات التفصيلية"]})]})]})})]})})}},7022:function(e,t,s){"use strict";s.d(t,{ExamProvider:function(){return d},U:function(){return i}});var r=s(7437),l=s(2265),a=s(9630),n=s(3494);let c=(0,l.createContext)(void 0),i=()=>{let e=(0,l.useContext)(c);if(void 0===e)throw Error("useExam must be used within an ExamProvider");return e},d=e=>{let{children:t}=e,{currentUser:s}=(0,a.a)(),[i,d]=(0,l.useState)(null),[o,m]=(0,l.useState)([]),[x,u]=(0,l.useState)(0),[h,y]=(0,l.useState)([]),[f,p]=(0,l.useState)(0),[g,j]=(0,l.useState)(!1),[b,N]=(0,l.useState)(null),[v,w]=(0,l.useState)(!1),[k,Z]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=null;return g&&f>0&&(e=setInterval(()=>{p(e=>e<=1?(E(),0):e-1)},1e3)),()=>{e&&clearInterval(e)}},[g,f]);let S=async(e,t,r)=>{if(!s){Z("يجب تسجيل الدخول لبدء الامتحان");return}try{let l;w(!0),Z(null),l="mock"===e?{questionCount:110,timeLimit:120,showFeedback:!1,allowReview:!1}:"practice"===e?{questionCount:(null==r?void 0:r.questionCount)||20,domain:null==r?void 0:r.domain,difficulty:null==r?void 0:r.difficulty,showFeedback:!0,allowReview:!0,timeLimit:0}:r||{questionCount:20,timeLimit:30,showFeedback:!1,allowReview:!0},N(l);let a=await (0,n.iv)(l.questionCount,l.domain,l.difficulty);if(0===a.length)throw Error("لا توجد أسئلة متاحة للمعايير المحددة");let c={userId:s.uid,examType:e,section:t,questions:a.map(e=>e.id),answers:Array(a.length).fill(null),startTime:new Date,completed:!1,timeSpent:0},i=await (0,n.nW)(c);d({...c,id:i}),m(a),y(Array(a.length).fill(null)),u(0),p(l.timeLimit?60*l.timeLimit:0),j(!0)}catch(e){Z(e.message||"فشل في بدء الامتحان")}finally{w(!1)}},E=async()=>{if(i)try{w(!0),j(!1);let e=0;o.forEach((t,s)=>{h[s]===t.correctAnswer&&e++});let t=Math.round(e/o.length*100),s=(null==b?void 0:b.timeLimit)?60*b.timeLimit-f:0;await (0,n.f_)(i.id,{answers:h,endTime:new Date,score:t,completed:!0,timeSpent:s}),d(e=>e?{...e,answers:h,endTime:new Date,score:t,completed:!0,timeSpent:s}:null)}catch(e){Z(e.message||"فشل في حفظ نتائج الامتحان")}finally{w(!1)}};return(0,l.useEffect)(()=>{s||(d(null),m([]),y([]),u(0),p(0),j(!1),N(null))},[s]),(0,r.jsx)(c.Provider,{value:{currentSession:i,questions:o,currentQuestionIndex:x,answers:h,timeRemaining:f,isExamActive:g,startExam:S,submitAnswer:(e,t)=>{y(s=>{let r=[...s];return r[e]=t,r})},navigateToQuestion:e=>{e>=0&&e<o.length&&u(e)},submitExam:E,pauseExam:()=>{j(!1)},resumeExam:()=>{j(!0)},examConfig:b,setExamConfig:N,loading:v,error:k},children:t})}},4451:function(e,t,s){"use strict";s.d(t,{oD:function(){return r},qP:function(){return a},wO:function(){return l}});let r=["جامعة الملك سعود","جامعة الملك عبدالعزيز","جامعة الملك فهد للبترول والمعادن","جامعة الملك فيصل","جامعة الملك خالد","جامعة الإمام محمد بن سعود الإسلامية","جامعة أم القرى","الجامعة الإسلامية بالمدينة المنورة","جامعة القصيم","جامعة طيبة","جامعة الطائف","جامعة جازان","جامعة الباحة","جامعة تبوك","جامعة الحدود الشمالية","جامعة الجوف","جامعة حائل","جامعة الأميرة نورة بنت عبدالرحمن","جامعة الملك سعود بن عبدالعزيز للعلوم الصحية","جامعة الملك عبدالله للعلوم والتقنية","جامعة دار العلوم","كليات الريان الأهلية","جامعة الأمير سلطان","جامعة عفت","أخرى"],l={biomedical:{name:"العلوم الطبية الحيوية الأساسية",percentage:10,color:"#3B82F6",description:"علم التشريح والفسيولوجيا، علم الأدوية والسموم، علم الأحياء الدقيقة والمناعة"},pharmaceutical:{name:"العلوم الصيدلانية",percentage:35,color:"#10B981",description:"الكيمياء الصيدلانية، علم الأدوية الصيدلاني، تقنية الصيدلة"},social:{name:"العلوم الاجتماعية/السلوكية/الإدارية",percentage:20,color:"#F59E0B",description:"أخلاقيات المهنة، إدارة الصيدلية، التواصل مع المرضى"},clinical:{name:"العلوم السريرية",percentage:35,color:"#EF4444",description:"العلاج الدوائي، الرعاية الصيدلانية، مراقبة الأدوية"}},a={SECTION_1_QUESTIONS:110,SECTION_2_QUESTIONS:110,SECTION_TIME_MINUTES:120,TOTAL_QUESTIONS:220,TOTAL_TIME_MINUTES:240,PASSING_SCORE:60}}},function(e){e.O(0,[358,139,230,231,685,971,23,744],function(){return e(e.s=1167)}),_N_E=e.O()}]);